<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= typeof title !== 'undefined' ? title + ' - Cubeeto Admin' : 'Cubeeto Admin' %></title>
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <!-- Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap">
  <!-- CSS -->
  <link rel="stylesheet" href="/css/style.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="bg-gray-100 text-gray-800 font-sans min-h-screen flex flex-col">
  <div class="flex flex-col md:flex-row min-h-screen">
    <!-- Sidebar -->
    <div class="bg-gray-800 text-white w-full md:w-64 md:min-h-screen flex-shrink-0">
      <div class="p-4 flex items-center justify-between md:justify-center">
        <a href="/admin/dashboard" class="text-2xl font-bold text-white flex items-center">
          <span>Cubeeto Admin</span>
        </a>
        <button id="mobile-menu-button" class="md:hidden focus:outline-none">
          <i class="fas fa-bars"></i>
        </button>
      </div>
      <nav id="mobile-menu" class="hidden md:block">
        <div class="px-4 py-2">
          <h5 class="text-xs uppercase tracking-wider text-gray-400 mb-2">Management</h5>
          <a href="/admin/dashboard" class="block py-2 px-4 rounded transition duration-200 hover:bg-gray-700 <%= path === '/admin/dashboard' ? 'bg-gray-700' : '' %>">
            <i class="fas fa-chart-line mr-2"></i> Dashboard
          </a>
          <a href="/admin/users" class="block py-2 px-4 rounded transition duration-200 hover:bg-gray-700 <%= path === '/admin/users' ? 'bg-gray-700' : '' %>">
            <i class="fas fa-users mr-2"></i> Users
          </a>
          <a href="/admin/products-approval" class="block py-2 px-4 rounded transition duration-200 hover:bg-gray-700 <%= path === '/admin/products-approval' ? 'bg-gray-700' : '' %>">
            <i class="fas fa-shopping-cart mr-2"></i> Product Approval
          </a>
          <a href="/admin/notes-approval" class="block py-2 px-4 rounded transition duration-200 hover:bg-gray-700 <%= path === '/admin/notes-approval' ? 'bg-gray-700' : '' %>">
            <i class="fas fa-file-alt mr-2"></i> Note Approval
          </a>
          <a href="/admin/studykit" class="block py-2 px-4 rounded transition duration-200 hover:bg-gray-700 <%= path === '/admin/studykit' ? 'bg-gray-700' : '' %>">
            <i class="fas fa-book mr-2"></i> Study Kit
          </a>
        </div>
        <div class="px-4 py-4 mt-4 border-t border-gray-700">
          <a href="/auth/logout" class="block py-2 px-4 rounded transition duration-200 hover:bg-gray-700">
            <i class="fas fa-sign-out-alt mr-2"></i> Logout
          </a>
        </div>
      </nav>
    </div>
    
    <!-- Content -->
    <div class="flex-1 flex flex-col">
      <!-- Flash Messages -->
      <% if (success_msg && success_msg.length > 0) { %>
        <div class="flash-message bg-green-100 border-l-4 border-green-500 text-green-700 p-4 m-4 rounded shadow-sm transition-opacity duration-300">
          <p><i class="fas fa-check-circle mr-2"></i><%= success_msg %></p>
        </div>
      <% } %>

      <% if (error_msg && error_msg.length > 0) { %>
        <div class="flash-message bg-red-100 border-l-4 border-red-500 text-red-700 p-4 m-4 rounded shadow-sm transition-opacity duration-300">
          <p><i class="fas fa-exclamation-circle mr-2"></i><%= error_msg %></p>
        </div>
      <% } %>

      <% if (error && error.length > 0) { %>
        <div class="flash-message bg-red-100 border-l-4 border-red-500 text-red-700 p-4 m-4 rounded shadow-sm transition-opacity duration-300">
          <p><i class="fas fa-exclamation-circle mr-2"></i><%= error %></p>
        </div>
      <% } %>
      
      <!-- Main Content -->
      <main class="flex-1 p-4">
        <div class="mb-6">
          <h1 class="text-2xl font-bold"><%= title %></h1>
        </div>
        <%- body %>
      </main>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="/js/main.js"></script>
</body>
</html>